//----------------------------------------------------------
//Bruno Marchi Pires
//Andrei Antônio Villa
//----------------------------------------------------------

package apresentacao;

import persistencia.EspecieDAO;
import persistencia.AnimalDAO;

import java.sql.Date;

import java.util.List;
import java.util.Scanner;

import dados.Especie;

import dados.Animal;

public class Main {

	private static EspecieDAO especieDAO;
	private static AnimalDAO animalDAO;
	
	
	public static void main(String[] args) {
		int op = -1;
		while(op!=0) {
			op = menu();
			switch (op){
            	case 1: 
            		especieDAO.insert(novaEspecie());
            		break;
            	case 2: 
            		animalDAO.insert(novoAnimal());
                    break;
            	case 3: 
            		printaTabelasEspecies(especieDAO.getInstance().selectAll());
          
                    break;
            	case 4: 
            		printaTabelasAnimais(animalDAO.getInstance().selectAll());
                    break;
            	case 5:
            		List<Animal> animais = animalDAO.getInstance().join();
                    break;
            	case 6:
            		animalDAO.subagreg();
            		break;
			}
		}
	}
	
	
	private static int menu() {
        System.out.println("");
        System.out.println("Informe o número da opção que desejas executar: ");
        System.out.println("1 - Inserir uma nova espécie");
        System.out.println("2 - Inserir um novo animal");
        System.out.println("3 - Exibir todas as espécies");
        System.out.println("4 - Exibir todos os animais");
        System.out.println("5 - Exibir animais com expectativa de vida maior que 10 anos");
        System.out.println("6 - Exibir especies ordenadas de acordo com a quantidade de animais que cada uma possui no zoológico");
        System.out.println("Digite 0 para sair");
        System.out.print("Sua opção: ");
        Scanner input = new Scanner(System.in);
        return Integer.parseInt(input.nextLine());
    }
	
	private static Especie novaEspecie() {
		Scanner input = new Scanner(System.in);
		Especie especie = new Especie();
		System.out.println("Informe o codigo da nova espécie:");
		especie.setCodEspecie(Integer.parseInt(input.nextLine()));
		System.out.println("Informe o nome da nova espécie:");
		especie.setNomeEspecie(input.nextLine());
		System.out.println("Informe a expectativa de vida da nova espécie:");
		especie.setExpectativaEspecie(Integer.parseInt(input.nextLine()));
		return especie;
	}
	
	private static Animal novoAnimal() {
		Scanner input = new Scanner(System.in); 
		Animal animal = new Animal();
		System.out.println("Informe o codigo do novo animal");
		animal.setCodAnimal(Integer.parseInt(input.nextLine()));
		System.out.println("Informe o nome do novo animal");
		animal.setNomeAnimal(input.nextLine());
		System.out.println("Informe o codigo da mãe do novo animal");
		animal.setCodAnimalMae(Integer.parseInt(input.nextLine()));
		System.out.println("Informe o codigo do pai do novo animal");
		animal.setCodAnimalPai(Integer.parseInt(input.nextLine()));
		System.out.println("Informe o codigo da especie do novo animal");
		animal.setCodEspecie(Integer.parseInt(input.nextLine()));
		System.out.println("Informe a data de nascimento do novo animal");
		String datastr = input.nextLine(); //conversão de string para DATASQL
		Date datasql = Date.valueOf(datastr);
		animal.setDataNascimento(datasql);
		return animal;
	}
	
	private static void printaTabelasAnimais(List<Animal> lista) {
		for (Animal a : lista) {
			System.out.println("____________________________________________________________________________________________________________________________________________________________________________");
			System.out.println(a.toString());
		}
	}
	
	private static void printaTabelasEspecies(List<Especie> lista) {
		for(Especie e : lista){
			System.out.println("______________________________________________________________________________________________________________________________________________________________________________");
			System.out.println(e.toString());
		}
	}
}
